# =============================================================================
# clang-tidy 설정 파일
# C++ 코드 품질 검사 및 자동 수정을 위한 설정
# =============================================================================

# -----------------------------------------------------------------------------
# 활성화할 체크 목록
# -----------------------------------------------------------------------------
Checks: >
  clang-analyzer-*,     # 정적 분석기 체크
  bugprone-*,           # 버그 가능성 체크
  performance-*,        # 성능 관련 체크
  modernize-*,          # 현대적 C++ 사용 권장
  readability-*,        # 가독성 관련 체크
  -llvmlibc-*,          # LLVM libc 체크 제외
  modernize-use-braces-for-init  # 중괄호 초기화 사용 권장

# -----------------------------------------------------------------------------
# 체크 옵션 설정
# -----------------------------------------------------------------------------
CheckOptions:

  # -------------------------------------------------------------------------
  # 중괄호 및 제어문 스타일
  # -------------------------------------------------------------------------
  - key: readability-braces-around-statements.ShortStatementLines
    value: 1  # 한 줄 제어문에도 중괄호 필수

  # -------------------------------------------------------------------------
  # 네임스페이스 네이밍
  # -------------------------------------------------------------------------
  - key: readability-identifier-naming.NamespaceCase
    value: lower_case  # 네임스페이스: snake_case

  # -------------------------------------------------------------------------
  # 클래스 및 구조체 네이밍
  # -------------------------------------------------------------------------
  - key: readability-identifier-naming.ClassCase
    value: CamelCase  # 클래스: PascalCase
  - key: readability-identifier-naming.StructCase
    value: CamelCase  # 구조체: PascalCase

  # -------------------------------------------------------------------------
  # 열거형(Enum) 네이밍
  # -------------------------------------------------------------------------
  - key: readability-identifier-naming.Enum
    value: CamelCase  # 열거형 타입: PascalCase
  - key: readability-identifier-naming.EnumCase
    value: CamelCase  # 열거형 값: PascalCase
  - key: readability-identifier-naming.EnumPrefix
    value: e  # 열거형 접두사: e
  - key: readability-identifier-naming.EnumIgnoredRegexp
    value: '^(e[A-Z][a-zA-Z0-9]*|Proto_|Grpc_|Autogen_).*$'  # e로 시작하는 열거형 허용
  - key: readability-identifier-naming.EnumConstantCase
    value: UPPER_CASE  # 열거형 상수: UPPER_CASE
  - key: readability-identifier-naming.EnumConstantIgnoredRegexp
    value: '^(k[A-Z0-9_]+)$'  # k로 시작하는 상수 허용

  # -------------------------------------------------------------------------
  # 함수 네이밍
  # -------------------------------------------------------------------------
  - key: readability-identifier-naming.FunctionCase
    value: CamelCase  # 함수: PascalCase

  # -------------------------------------------------------------------------
  # 전역 변수 및 상수 네이밍
  # -------------------------------------------------------------------------
  - key: readability-identifier-naming.GlobalConstantCase
    value: UPPER_CASE  # 전역 상수: UPPER_CASE
  - key: readability-identifier-naming.GlobalVariableCase
    value: CamelCase  # 전역 변수: PascalCase
  - key: readability-identifier-naming.GlobalVariablePrefix
    value: g_  # 전역 변수 접두사: g_

  # -------------------------------------------------------------------------
  # 구조체 멤버 네이밍
  # -------------------------------------------------------------------------
  - key: readability-identifier-naming.StructMemberCase
    value: camelBack  # 구조체 멤버: camelCase
  - key: readability-identifier-naming.StructMemberIgnoredRegexp
    value: '^[A-Z][A-Za-z0-9]*$'  # PascalCase 구조체 멤버 허용
  - key: readability-identifier-naming.StructMemberPrefix
    value: ''  # 구조체 멤버 접두사: 없음

  # -------------------------------------------------------------------------
  # 클래스 멤버 네이밍
  # -------------------------------------------------------------------------
  - key: readability-identifier-naming.ClassMemberCase
    value: CamelCase  # 클래스 멤버: PascalCase
  - key: readability-identifier-naming.ClassMemberPrefix
    value: m_  # 클래스 멤버 접두사: m_
  - key: readability-identifier-naming.PrivateMemberPrefix
    value: _  # private 멤버 접두사: _
  - key: readability-identifier-naming.StaticMemberPrefix
    value: s_  # static 멤버 접두사: s_

  # -------------------------------------------------------------------------
  # 지역 변수 및 매개변수 네이밍
  # -------------------------------------------------------------------------
  - key: readability-identifier-naming.LocalVariableCase
    value: camelBack  # 지역 변수: camelCase
  - key: readability-identifier-naming.LocalVariableIgnoredRegexp
    value: '^[a-z]+(_[a-z0-9]+)*$'  # snake_case 지역 변수 허용
  - key: readability-identifier-naming.ConstantCase
    value: UPPER_CASE  # 상수: UPPER_CASE

  # -------------------------------------------------------------------------
  # 허용된 약어 및 최소 길이
  # -------------------------------------------------------------------------
  - key: readability-identifier-naming.AllowedAbbreviations
    value: 'Id;Rpc;Uuid;Db;Api;Cpu;Gpu;Io;Url;Http;Https;Tcp;Udp;Xml;Json;Ui;Ux;Os'
  - key: readability-identifier-naming.ClassMinLength
    value: 3  # 클래스명 최소 길이
  - key: readability-identifier-naming.FunctionMinLength
    value: 3  # 함수명 최소 길이
  - key: readability-identifier-naming.VariableMinLength
    value: 1  # 변수명 최소 길이
  - key: readability-identifier-naming.NamespaceMinLength
    value: 2  # 네임스페이스명 최소 길이
  - key: readability-identifier-naming.ParameterMinLength
    value: 2  # 매개변수명 최소 길이
  - key: readability-identifier-naming.EnumConstantMinLength
    value: 3  # 열거형 상수명 최소 길이
  - key: readability-identifier-naming.TypedefMinLength
    value: 2  # typedef명 최소 길이
  - key: readability-identifier-naming.TypeAliasMinLength
    value: 2  # 타입 별칭명 최소 길이

  # -------------------------------------------------------------------------
  # 식별자 길이 제한
  # -------------------------------------------------------------------------
  - key: readability-identifier-length.MinimumVariableNameLength
    value: 1  # 변수명 최소 길이
  - key: readability-identifier-length.MinimumParameterNameLength
    value: 1  # 매개변수명 최소 길이
  - key: readability-identifier-length.MinimumLoopCounterNameLength
    value: 1  # 루프 카운터명 최소 길이
  - key: readability-identifier-length.MinimumExceptionNameLength
    value: 1  # 예외명 최소 길이
  - key: readability-identifier-length.IgnoredVariableNames
    value: '^ec$'  # 'ec' 변수명은 길이 제한 무시

  # -------------------------------------------------------------------------
  # 제외할 헤더 파일
  # -------------------------------------------------------------------------
  - key: ExcludeHeaderFilterRegex
    value: '(third_party/.*|external/.*|vendor/.*|include/.*\.h)'

  # -------------------------------------------------------------------------
  # Modernize 체크 옵션
  # -------------------------------------------------------------------------
  - key: modernize-use-auto.MinTypeNameLength
    value: 5  # auto 사용을 위한 최소 타입명 길이
  - key: modernize-use-auto.RemoveStars
    value: true  # auto 사용 시 포인터 별표 제거
  - key: modernize-use-nullptr.NullMacros
    value: 'NULL'  # nullptr 사용을 위한 NULL 매크로
  - key: modernize-use-override.AddOverride
    value: true  # override 키워드 추가
  - key: modernize-use-override.RemoveVirtual
    value: true  # override 사용 시 virtual 키워드 제거

  # -------------------------------------------------------------------------
  # Performance 체크 옵션
  # -------------------------------------------------------------------------
  - key: performance-for-range-copy.WarnOnAllAutoCopies
    value: true  # 범위 기반 for 루프에서 모든 auto 복사 경고
  - key: performance-unnecessary-value-param.AllowedTypes
    value: 'std::.*'  # 불필요한 값 전달 허용 타입

  # -------------------------------------------------------------------------
  # Bugprone 체크 옵션
  # -------------------------------------------------------------------------
  - key: bugprone-exception-escape.AllowedFunctions
    value: 'main'  # 예외 누수 허용 함수
  - key: bugprone-suspicious-missing-comma.MaxConcatenatedTokens
    value: 5  # 의심스러운 쉼표 누락 체크를 위한 최대 연결 토큰 수
  - key: bugprone-suspicious-missing-comma.IgnoreMacros
    value: true  # 매크로에서 쉼표 누락 체크 무시